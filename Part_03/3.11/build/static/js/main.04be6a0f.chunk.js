(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,n,t){e.exports=t(42)},22:function(e,n,t){},23:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),u=t.n(c),o=(t(22),t(6)),l=t(5),i=(t(23),function(e){var n=e.nameFilter,t=e.handleNameFilterChange;return r.a.createElement("form",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))}),s=function(e){var n=e.addPerson,t=e.newName,a=e.newNumber,c=e.handlePersonChange,u=e.handleNumberChange,o=e.inputNameRef;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:c,ref:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.personToShow,t=e.deletePersonHandler;return r.a.createElement("ul",null,n.map((function(e,n){return r.a.createElement("li",{key:n},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))})))},d=t(2),p=t.n(d),m=t(3),h=t(4),b=t.n(h),v="api/persons",w=function(){var e=Object(m.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.get(v),e.prev=1,e.next=4,n;case 4:return e.abrupt("return",e.sent.data);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.post(v,n),e.prev=1,e.next=4,t;case 4:return e.abrupt("return",e.sent.data);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(p.a.mark((function e(n){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(v,"/").concat(n.id),a=b.a.put(t,n),e.prev=2,e.next=5,a;case 5:return e.abrupt("return",e.sent.data);case 8:throw e.prev=8,e.t0=e.catch(2),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n){return e.apply(this,arguments)}}(),j={getAll:w,addNewData:E,deletePerson:function(){var e=Object(m.a)(p.a.mark((function e(n){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(v,"/").concat(n),a=b.a.delete(t),e.prev=2,e.next=5,a;case 5:return e.abrupt("return",e.sent.data);case 8:throw e.prev=8,e.t0=e.catch(2),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n){return e.apply(this,arguments)}}(),updateData:g},O=function(){var e=null,n=Object(a.useRef)(),t=Object(a.useState)(null),c=Object(l.a)(t,2),u=c[0],d=c[1],p=Object(a.useState)(""),m=Object(l.a)(p,2),h=m[0],b=m[1],v=Object(a.useState)(""),w=Object(l.a)(v,2),E=w[0],g=w[1],O=Object(a.useState)(""),N=Object(l.a)(O,2),k=N[0],C=N[1];Object(a.useEffect)((function(){console.log("effect"),j.getAll().then((function(e){d(e)})).catch((function(e){console.log(e)}))}),[]);return null!==u?(e=u.filter((function(e){return e.name.toUpperCase().includes(k.toUpperCase())})),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{nameFilter:k,handleNameFilterChange:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(s,{addPerson:function(e){e.preventDefault();var t=u.findIndex((function(e){return e.name===h})),a=u.findIndex((function(e){return e.number===E&&e.name===h}));if(t<0){var r={name:h,number:E};j.addNewData(r).then((function(e){d(u.concat(e))})).catch((function(e){console.log(e)}))}else if(a<0){if(window.confirm(h+"is already added to phonebook,replace old number with a new one?")){var c=Object(o.a)(Object(o.a)({},u[t]),{},{number:E});j.updateData(c).then((function(e){return d(u.map((function(e){return e.id!==c.id?e:c})))})).catch((function(e){console.log(e)}))}}else alert("".concat(h," is already added to phonebook"));b(""),g(""),n.current.focus()},newName:h,newNumber:E,handlePersonChange:function(e){b(e.target.value)},handleNumberChange:function(e){g(e.target.value)},inputNameRef:n}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{personToShow:e,deletePersonHandler:function(e){j.deletePerson(e).then((function(){d(u.filter((function(n){return n.id!==e})))})).catch((function(e){console.log(e)}))}}))):r.a.createElement("div",null,r.a.createElement("h1",null,"Loading phonebook data..."))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.04be6a0f.chunk.js.map